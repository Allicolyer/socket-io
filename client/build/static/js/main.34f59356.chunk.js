(this["webpackJsonpsocket-io"]=this["webpackJsonpsocket-io"]||[]).push([[0],{35:function(e,t,a){e.exports=a(73)},40:function(e,t,a){},41:function(e,t,a){},70:function(e,t){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(32),c=a.n(o),i=(a(40),a(41),a(2)),r=a(3),l=a(5),u=a(4),m=a(6),h=a(33),d=a.n(h),p=a(34),g=a(8),f=function(e){var t=e.name,a=e.message,n=e.isCurrentUser;return s.a.createElement("li",null,s.a.createElement("span",{className:n?"name current-user":"name"},t,":"," "),a)},v=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).onClose=function(e){a.props.onClose&&a.props.onClose(e)},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return this.props.show?s.a.createElement("div",{className:"modal-container"},s.a.createElement("div",{className:"modal",id:"modal"},s.a.createElement("h2",null,"Select a Username"),s.a.createElement("div",{className:"content"},this.props.children),s.a.createElement("div",{className:"actions"},s.a.createElement("button",{className:"toggle-button",onClick:this.onClose},"close")))):null}}]),t}(s.a.Component),b=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"transcript"},this.props.context&&s.a.createElement("h2",null," Transcript"),s.a.createElement("div",null,this.props.context))}}]),t}(s.a.Component),k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).showModal=function(e){a.setState({show:!a.state.show})},a.enterUsername=function(e){e.preventDefault(),a.showModal()},a.state={name:"guest",message:"",messages:[],context:"",show:!0},a.handleNameChange=a.handleNameChange.bind(Object(g.a)(a)),a.handleMessageChange=a.handleMessageChange.bind(Object(g.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.socket;this.initSocket(e)}},{key:"initSocket",value:function(e){var t=this;e.on("chat message",(function(e,a,n,s){t.addMessage(e,a,n,s),n?t.playAudio("./audio/outgoing-message.wav"):t.playAudio("./audio/incoming-message.mp3")}))}},{key:"handleNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"handleMessageChange",value:function(e){this.setState({message:e.target.value})}},{key:"addMessage",value:function(e,t,a,n){console.log("I added"),this.updateContext(t),console.log(n),n&&(t=t.replace(/[\r\n]/g," ").replace(/[\/#.,;!?$%\^&\*:{}=\_`~()]/g," ").replace(/["]/g,"<-").replace(/\s\s+/g," ").trim(),console.log(t)),this.setState({messages:[].concat(Object(p.a)(this.state.messages),[{name:e,message:t,isCurrentUser:a}])}),a&&this.sendAIMessage()}},{key:"updateContext",value:function(e){this.setState({context:"".concat(this.state.context," ").concat(e)})}},{key:"sendAIMessage",value:function(){var e,t=this;(e=this.state.context,fetch("https://transformer.huggingface.co/autocomplete/gpt2/large",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({context:e,model_size:"gpt2/large",top_p:.9,temperature:1,max_time:1})}).then((function(e){return e.json()})).then((function(e){var t="";return e.sentences.forEach((function(e){e.value.length>t.length&&(t=e.value)})),t}))).then((function(e){return t.props.socket.emit("AI message","Robot from ".concat(t.state.name),e)}))}},{key:"playAudio",value:function(e){new Audio(e).play()}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.socket.emit("chat message",this.state.name,this.state.message),this.setState({message:""})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(v,{onClose:this.showModal,show:this.state.show},s.a.createElement("form",{onSubmit:this.enterUsername},s.a.createElement("input",{id:"name",type:"text",value:this.state.name,onChange:this.handleNameChange}))),s.a.createElement("button",{className:"modal-button",onClick:this.showModal},"Change Username"),s.a.createElement("div",{className:"chatroom-container"},s.a.createElement("div",{className:"chat-window"},s.a.createElement("ul",{id:"messages"},this.state.messages.map((function(e,t){return s.a.createElement(f,{key:t,name:e.name,message:e.message,isCurrentUser:e.isCurrentUser})}))),s.a.createElement("form",{onSubmit:this.handleSubmit,className:"message-form"},s.a.createElement("input",{id:"message",type:"text",value:this.state.message,onChange:this.handleMessageChange}),s.a.createElement("button",null,"Send"))),s.a.createElement("div",{className:"transcript-window"},s.a.createElement(b,{context:this.state.context}))))}}]),t}(s.a.Component),E=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).initSocket=function(){var e=d()("/");e.on("connect",(function(){console.log("Connected")})),a.setState({socket:e})},a.state={socket:null},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){this.initSocket()}},{key:"render",value:function(){var e=this.state.socket;return s.a.createElement(k,{socket:e})}}]),t}(s.a.Component);var C=function(){return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"}),s.a.createElement(E,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.34f59356.chunk.js.map