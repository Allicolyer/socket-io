(this["webpackJsonpsocket-io"]=this["webpackJsonpsocket-io"]||[]).push([[0],{36:function(e,t,a){e.exports=a(76)},41:function(e,t,a){},42:function(e,t,a){},71:function(e,t){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(16),c=a.n(s),r=(a(41),a(42),a(2)),i=a(3),l=a(5),m=a(4),h=a(6),u=a(33),d=a.n(u),g=a(35),p=a(7),f=function(e){var t=e.name,a=e.message,n=e.isCurrentUser;return o.a.createElement("li",null,o.a.createElement("span",{className:n?"name current-user":"name"},t,":"," "),a)},v=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).onClose=function(e){a.props.onClose&&a.props.onClose(e)},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.props.show?o.a.createElement("div",{className:"modal-container"},o.a.createElement("div",{className:"modal",id:"modal"},o.a.createElement("h2",null,this.props.header),o.a.createElement("div",{className:"content"},this.props.children),o.a.createElement("div",{className:"actions"},o.a.createElement("button",{className:"toggle-button",onClick:this.onClose},"close")))):null}}]),t}(o.a.Component),b=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"transcript"},this.props.context&&o.a.createElement("h2",null," Transcript"),o.a.createElement("div",null,this.props.context))}}]),t}(o.a.Component),k=a(34),w=a.n(k),E=(a(75),{"Under the Sea":"Under the sea, under the sea, everything's better down where it's wetter, take it from me!",Zork:"TBD",Pandemic:"Make sure you stay socially isolated!",Misc:""}),y=Object.keys(E),C=y[3],j=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).showUsernameModal=function(e){a.setState({showUsernameModal:!a.state.showUsernameModal})},a.showRoomModal=function(e){a.setState({showRoomModal:!a.state.showRoomModal})},a.enterUsername=function(e){e.preventDefault(),a.showUsernameModal()},a.state={room:C,name:"guest",message:"",messages:[],context:"",showUsernameModal:!0,showRoomModal:!1},a.handleNameChange=a.handleNameChange.bind(Object(p.a)(a)),a.handleMessageChange=a.handleMessageChange.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a.changeRoom=a.changeRoom.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"changeRoom",value:function(e){var t=e.value,a=this.state.room;this.setState({room:t,context:E[t],messages:[]},(function(){this.props.socket.emit("room",a,t)}))}},{key:"componentDidMount",value:function(){var e=this.props.socket;this.initSocket(e)}},{key:"initSocket",value:function(e){var t=this;e.on("chat message",(function(e,a,n,o){t.addMessage(e,a,n,o),n?t.playAudio("./audio/outgoing-message.wav"):t.playAudio("./audio/incoming-message.mp3")}))}},{key:"handleNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"handleMessageChange",value:function(e){this.setState({message:e.target.value})}},{key:"addMessage",value:function(e,t,a,n){console.log("I added"),this.updateContext(t),console.log(n),n&&(t=t.replace(/[\r\n]/g," ").replace(/[\/#.,;!?$%\^&\*:{}=\_`~()]/g," ").replace(/["]/g,"<-").replace(/\s\s+/g," ").trim(),console.log(t)),this.setState({messages:[].concat(Object(g.a)(this.state.messages),[{name:e,message:t,isCurrentUser:a}])}),a&&this.sendAIMessage()}},{key:"updateContext",value:function(e){this.setState({context:"".concat(this.state.context," ").concat(e)})}},{key:"sendAIMessage",value:function(){var e,t=this;(e=this.state.context,fetch("https://transformer.huggingface.co/autocomplete/gpt2/large",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({context:e,model_size:"gpt2/large",top_p:.9,temperature:1,max_time:1})}).then((function(e){return e.json()})).then((function(e){var t="";return e.sentences.forEach((function(e){e.value.length>t.length&&(t=e.value)})),t}))).then((function(e){return t.props.socket.emit("AI message","Robot from ".concat(t.state.name),e,t.state.room)}))}},{key:"playAudio",value:function(e){new Audio(e).play()}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.socket.emit("chat message",this.state.name,this.state.message,this.state.room),this.setState({message:""})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(v,{onClose:this.showUsernameModal,show:this.state.showUsernameModal,header:"Enter Username"},o.a.createElement("form",{onSubmit:this.enterUsername},o.a.createElement("input",{id:"name",type:"text",value:this.state.name,onChange:this.handleNameChange}))),o.a.createElement(v,{onClose:this.showRoomModal,show:this.state.showRoomModal,header:"Switch Room"},o.a.createElement(w.a,{options:y,onChange:this.changeRoom,value:C,placeholder:"Select a Room"}),";"),o.a.createElement("button",{className:"modal-button",onClick:this.showUsernameModal},"Change Username"),o.a.createElement("button",{className:"modal-button",onClick:this.showRoomModal},"Change Room"),o.a.createElement("h1",null,this.state.room),o.a.createElement("div",{className:"chatroom-container"},o.a.createElement("div",{className:"chat-window"},o.a.createElement("ul",{id:"messages"},this.state.messages.map((function(e,t){return o.a.createElement(f,{key:t,name:e.name,message:e.message,isCurrentUser:e.isCurrentUser})}))),o.a.createElement("form",{onSubmit:this.handleSubmit,className:"message-form"},o.a.createElement("input",{id:"message",type:"text",value:this.state.message,onChange:this.handleMessageChange}),o.a.createElement("button",null,"Send"))),o.a.createElement("div",{className:"transcript-window"},o.a.createElement(b,{context:this.state.context}))))}}]),t}(o.a.Component),O=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).initSocket=function(){var e=d()("http://localhost:4000/");e.on("connect",(function(){console.log("Connected")})),a.setState({socket:e})},a.state={socket:null},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.initSocket()}},{key:"render",value:function(){var e=this.state.socket;return o.a.createElement(j,{socket:e})}}]),t}(o.a.Component);var M=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"}),o.a.createElement(O,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.eaf63e57.chunk.js.map